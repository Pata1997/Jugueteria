{% extends "base.html" %}

{% block title %}Editar Cliente{% endblock %}
{% block page_title %}Editar Cliente{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <i class="fas fa-edit"></i> Editar Cliente: {{ cliente.nombre }}
    </div>
    <div class="card-body">
        <form method="POST">
            <div class="row">
                <div class="col-md-3 mb-3">
                    <label for="tipo_documento" class="form-label">Tipo Documento *</label>
                    <select class="form-select" id="tipo_documento" name="tipo_documento" required>
                        <option value="CI" {% if cliente.tipo_documento == 'CI' %}selected{% endif %}>CI</option>
                        <option value="RUC" {% if cliente.tipo_documento == 'RUC' %}selected{% endif %}>RUC</option>
                    </select>
                </div>
                
                <div class="col-md-5 mb-3">
                    <label for="numero_documento" class="form-label">Número Documento *</label>
                    <input type="text" class="form-control" id="numero_documento" name="numero_documento" value="{{ cliente.numero_documento }}" required>
                </div>
                
                <div class="col-md-4 mb-3">
                    <label for="tipo_cliente" class="form-label">Tipo Cliente *</label>
                    <select class="form-select" id="tipo_cliente" name="tipo_cliente" required>
                        <option value="particular" {% if cliente.tipo_cliente == 'particular' %}selected{% endif %}>Particular</option>
                        <option value="empresa" {% if cliente.tipo_cliente == 'empresa' %}selected{% endif %}>Empresa</option>
                        <option value="gobierno" {% if cliente.tipo_cliente == 'gobierno' %}selected{% endif %}>Gobierno</option>
                    </select>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-12 mb-3">
                    <label for="nombre" class="form-label">Nombre / Razón Social *</label>
                    <input type="text" class="form-control" id="nombre" name="nombre" value="{{ cliente.nombre }}" required>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-12 mb-3">
                    <label for="direccion" class="form-label">Dirección</label>
                    <input type="text" class="form-control" id="direccion" name="direccion" value="{{ cliente.direccion or '' }}">
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="telefono" class="form-label">Teléfono</label>
                    <input type="text" class="form-control" id="telefono" name="telefono" value="{{ cliente.telefono or '' }}">
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" class="form-control" id="email" name="email" value="{{ cliente.email or '' }}">
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="limite_credito" class="form-label">Límite de Crédito (Gs.)</label>
                    <input type="number" class="form-control" id="limite_credito" name="limite_credito" value="{{ cliente.limite_credito }}" min="0">
                </div>
                
                <div class="col-md-6 mb-3">
                    <label for="descuento_especial" class="form-label">Descuento Especial (%)</label>
                    <input type="number" step="0.01" class="form-control" id="descuento_especial" name="descuento_especial" value="{{ cliente.descuento_especial }}" min="0" max="100">
                </div>
            </div>
            
            <div class="mb-3">
                <label for="observaciones" class="form-label">Observaciones</label>
                <textarea class="form-control" id="observaciones" name="observaciones" rows="3">{{ cliente.observaciones or '' }}</textarea>
            </div>
            
            <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" id="activo" name="activo" {% if cliente.activo %}checked{% endif %}>
                <label class="form-check-label" for="activo">
                    Cliente Activo
                </label>
            </div>
            
            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Guardar Cambios
                </button>
                <a href="{{ url_for('clientes.ver', id=cliente.id) }}" class="btn btn-secondary">
                    <i class="fas fa-times"></i> Cancelar
                </a>
                <button type="button" class="btn btn-danger ms-auto" onclick="if(confirm('¿Está seguro de desactivar este cliente?')) document.getElementById('formEliminar').submit();">
                    <i class="fas fa-ban"></i> Desactivar Cliente
                </button>
            </div>
        </form>
        
        <form id="formEliminar" method="POST" action="{{ url_for('clientes.eliminar', id=cliente.id) }}" style="display: none;"></form>
    </div>
</div>
{% endblock %}
